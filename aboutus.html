<!DOCTYPE html>
<html lang="pt-PT">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tuna Universitária do Porto</title>

    <!-- Fonts & Libraries -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />

    <!-- Favicon -->
    <link rel="icon" href="images/TUP_Icon.png" type="image/png" />

    <style>
      @font-face {
        font-family: 'custom_font';
        src: url('fonts/custom_font.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      html {
        scroll-behavior: smooth;
      }

      body, html {
        height: 100%;
        margin: 0;
        font-family: "Lato", Arial, sans-serif;
        color: #ffffff;
        background-color: #111;
        line-height: 1.8;
      }

      /* === Navigation === */
      nav {
        background-color: #111;
        padding: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .nav-left, .nav-right {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      nav a {
        color: white;
        text-decoration: none;
        font-weight: bold;
        padding: 10px 18px;
        border-radius: 6px;
        transition: background 0.3s, transform 0.2s;
      }

      nav a:hover {
        background-color: #333;
        transform: scale(1.05);
      }

      /* === Language Dropdown === */
      .language-selector {
        position: relative;
        color: white;
        font-weight: bold;
        padding: 8px 16px;
        border-radius: 6px;
        background: none;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
      }

      .language-dropdown {
        display: none;
        position: absolute;
        right: 0;
        top: 100%;
        background: #111;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        min-width: 160px;
        z-index: 10;
      }

      .language-selector.active .language-dropdown {
        display: block;
      }

      .language-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        color: white;
        background: none;
        border: none;
        width: 100%;
        cursor: pointer;
      }

      .language-option:hover {
        background: #333;
      }

      .language-flag {
        width: 22px;
        height: 16px;
        border-radius: 3px;
        border: 1px solid #fff;
      }

      /* === Content Section === */
      .content-section {
        max-width: 900px;
        margin: 0 auto 40px;
        padding: 70px;
        background: none;
        border-radius: 0;
        box-shadow: none;
        font-size: 1.5em;
        line-height: 1.6;
        color: #ffffff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        text-align: center;
      }

      .content-section h2 {
        font-size: 1.2em;
        margin-bottom: 15px;
        color: #ffffff;
        font-weight: bold;
      }

      /* Layout for image on left/right/below */
      .content-section.image-left {
        flex-direction: row-reverse;
        text-align: left;
      }

      .content-section.image-right {
        flex-direction: row;
        text-align: left;
      }

      .content-section.image-below {
        flex-direction: column;
        text-align: center;
      }

      .content-section.image-left .image-content,
      .content-section.image-right .image-content {
        max-width: 400px;
        border-radius: 12px;
        box-shadow: 0 20px 20px rgba(0, 0, 0, 0.4);
        margin-top: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .content-section.image-below .image-content {
        max-width: 900px; /* same max width as .content-section */
        width: 100%;      /* let it fill the container */
        margin: 0 auto;   /* center horizontally */
      }

      .content-section.image-below .image-content img {
        width: 100%;      /* image fills image-content width */
        height: auto;     /* keep aspect ratio */
        border-radius: 12px;
      }

      /* Spacing on left/right */
      .content-section.image-left .image-content {
        margin-right: 80px;
      }

      .content-section.image-right .image-content {
        margin-left: 80px;
      }

      /* Image inside fills container perfectly */
      .image-content img {
        width: 100%;
        height: 100%;
        object-fit: fill;
        border-radius: 0px;
        display: block;
        /* Remove any margin/padding/border that could affect size */
        margin: 0;
        padding: 0;
        border: none;
        max-width: none;
        max-height: none;
      }

      /* Text content styling */
      .text-content {
        flex: 1;
        min-width: 280px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      /* Images inside content sections */
      .image-content img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
        display: block;
      }
      
      .image-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .image-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
      }

      .image-caption {
        margin-top: 0px; /* uniform spacing */
        font-size: 0.9em;
        color: #ccc;
        text-align: center;
        font-style: italic;
        padding: 20px 30px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);

        width: 100%;          /* fills parent container width */
        box-sizing: border-box; /* include padding inside width */

        margin-left: 0;       /* remove auto margins */
        margin-right: 0;
      }


      .carousel {
        position: relative;
        width: 100%;
        max-width: 600px;  /* or whatever the text width is */
        margin: 40px auto 0 auto; /* spacing from text, centered */
        overflow: hidden;
        box-sizing: border-box;
        border-radius: 12px;
        box-shadow: 0 20px 20px rgba(0, 0, 0, 0.4);
      }

      .carousel-images {
        display: flex;
        transition: transform 0.5s ease-in-out;
        width: 100%;
      }

      .carousel-images .slide {
        min-width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 400px; /* or whatever height your slides use */
        box-sizing: border-box;
        overflow: hidden;
      }

      .carousel-images .slide img,
      .carousel-images .slide video {
        height: 100%;
        width: auto;
        max-width: 100%;
        object-fit: cover; /* Use 'contain' if you want full visibility instead of crop */
        border-radius: 12px;
        background-color: black; /* Prevent transparent bars */
      }
      
      .carousel-caption {
        background-color: rgba(255, 255, 255, 0.08);
        padding: 20px 30px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        
        display: block;       /* fill the container horizontally */
        width: 100%;          /* same width as image */
        box-sizing: border-box; /* include padding in width */
        
        margin: 15px 0 0 0;  /* top margin only, no side margin */
        
        color: #ccc;
        font-style: italic;
        text-align: center;
      }


      /* Arrows vertically centered */
      .arrow {
        position: absolute;
        top: 200px; /* half of .slide height (400px) */
        transform: translateY(-50%);
        font-size: 2em;
        background-color: rgba(0, 0, 0, 0.4);
        color: white;
        border: none;
        padding: 0.5rem;
        cursor: pointer;
        z-index: 2;
        border-radius: 8px;
      }


      .left-arrow {
        left: 10px;
      }

      .right-arrow {
        right: 10px;
      }

      /* === Contact Section === */
      .contact-section {
        background: #222;
        color: #ffffff;
        text-align: center;
        padding: 10px 0;
      }

      .contact-link {
        color: #ffd700;
        text-decoration: none;
      }

      .contact-section .fa-brands {
        margin: 0 12px;
        color: #ffd700;
        font-size: 2.6em;
        transition: transform 0.3s;
      }

      .contact-section .fa-brands:hover {
        transform: scale(1.1);
      }

      .text-box {
        background-color: rgba(255, 255, 255, 0.08);
        padding: 20px 30px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        display: inline-block;
        width: fit-content;
        max-width: 100%;
      }



      /* === Responsive === */
      @media (max-width: 768px) {
        .content-section {
          flex-direction: column;
          text-align: center;
        }

        .image-content {
          justify-content: center;
          margin-top: 20px !important;
          max-width: 100% !important;
          height: auto !important;
          aspect-ratio: auto !important;
        }

        .image-content img {
          width: 80%;
          height: auto;
        }

      }

    </style>
  </head>

<body>
  <nav>
    <div class="nav-left">
      <a href="main.html" data-i18n="start"></a>
      <a href="calendar.html" data-i18n="calendar"></a>
      <a href="merch.html" data-i18n="merch"></a>
      <a href="sobrenos.html" data-i18n="aboutus"></a>
    </div>
    <div class="nav-right">
      <div class="language-selector" onclick="toggleLanguageDropdown(this)">
        <span data-i18n="idioms"></span>
        <div class="language-dropdown">
          <button class="language-option" data-lang="pt">
            <img class="language-flag" src="https://flagcdn.com/pt.svg" />
            <span data-i18n="languages.pt"></span>
          </button>
          <button class="language-option" data-lang="en">
            <img class="language-flag" src="https://flagcdn.com/gb.svg" />
            <span data-i18n="languages.en"></span>
          </button>
          <button class="language-option" data-lang="es">
            <img class="language-flag" src="https://flagcdn.com/es.svg" />
            <span data-i18n="languages.es"></span>
          </button>
          <button class="language-option" data-lang="fr">
            <img class="language-flag" src="https://flagcdn.com/fr.svg" />
            <span data-i18n="languages.fr"></span>
          </button>
          <button class="language-option" data-lang="de">
            <img class="language-flag" src="https://flagcdn.com/de.svg" />
            <span data-i18n="languages.de"></span>
          </button>
          <button class="language-option" data-lang="it">
            <img class="language-flag" src="https://flagcdn.com/it.svg" />
            <span data-i18n="languages.it"></span>
          </button>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Secções TUP Atualizadas -->

  <div class="content-section image-below" data-aos="fade-up">
    <div class="text-content">
      <div class="text-box">
        <h2 data-i18n="title1"></h2>
        <p data-i18n="section1"></p>
      </div>
    </div>

    <div class="image-content carousel" data-i18n-captions='["caption1_1", "caption1_2", "caption1_3"]'>
      <button class="arrow left-arrow" onclick="prevSlide(this)">&#10094;</button>
      <div class="carousel-images" data-index="0">
        <div class="slide"><img src="images/OUP_1922.jpg" /></div>
        <div class="slide"><img src="images/Orquestra_Universitaria_Tangos_1937.jpg" /></div>
        <div class="slide"><img src="images/TUP_1937.jpg" /></div>
      </div>
      <button class="arrow right-arrow" onclick="nextSlide(this)">&#10095;</button>
    </div>
    <div class="image-caption"></div>
  </div>

  <section class="content-section image-left" data-aos="fade-up">
  <div class="text-content">
    <div class="text-box">
      <h2 data-i18n="title2"></h2>
      <p data-i18n="section2"></p>
    </div>
  </div>

  <div class="image-content carousel" data-i18n-captions='["caption2_1","caption2_2","caption2_3","caption2_4","caption2_5","caption2_6"]'>
    <button class="arrow left-arrow" onclick="prevSlide(this)">&#10094;</button>

    <div class="carousel-images" data-index="0">
      <div class="slide"><img src="images/EP_TUP_1964.png" /></div>
      <div class="slide">
        <video controls preload="metadata">
          <source src="videos/Tuna Universitária do Porto - A Don Rosa Toledo.mp4" type="video/mp4" />
        </video>
      </div>
      <div class="slide">
        <video controls preload="metadata">
          <source src="videos/Tuna Universitária do Porto - Madalena.mp4" type="video/mp4" />
        </video>
      </div>
      <div class="slide">
        <video controls preload="metadata">
          <source src="videos/Tuna Universitária do Porto - Perdidamente.mp4" type="video/mp4" />
        </video>
      </div>
      <div class="slide">
        <video controls preload="metadata">
          <source src="videos/Tuna Universitária do Porto - Timor.mp4" type="video/mp4" />
        </video>
      </div>
      <div class="slide">
        <video controls preload="metadata">
          <source src="videos/Tuna Universitária do Porto - Amores de Estudante.mp4" type="video/mp4" />
        </video>
      </div>
    </div>

    <button class="arrow right-arrow" onclick="nextSlide(this)">&#10095;</button>
    <div class="image-caption" data-i18n="caption2_1"></div>
  </div>
</section>




  <section class="content-section image-right" data-aos="fade-up">
    <div class="text-content">
      <div class="text-box">
        <h2 data-i18n="title3"></h2>
        <p data-i18n="section3"></p>
      </div>
    </div>
    <div class="image-content">
      <img src="images/TUP_Minerva.jpeg"/>
      <div class="image-caption" data-i18n="caption3_1"></div>
    </div>
  </section>

  <section class="content-section image-below" data-aos="fade-up">
    <div class="text-content">
      <div class="text-box">
        <h2 data-i18n="title4"></h2>
        <p data-i18n="section4"></p>
      </div>
    </div>

    <div class="image-content carousel" data-i18n-captions='["caption4_1", "caption4_2", "caption4_3", "caption4_4"]'>
      <button class="arrow left-arrow" onclick="prevSlide(this)">&#10094;</button>
      
      <div class="carousel-images" data-index="0">
        <div class="slide"><img src="images/TUP_Argentina_2004.png" /></div>
        <div class="slide"><img src="images/TUP_Granada_2009.jpg" /></div>
        <div class="slide"><img src="images/TUP_Mexico_2013.png" /></div>
        <div class="slide"><img src="images/TUP_Murcia_2024.jpg" /></div>
      </div>
      
      <button class="arrow right-arrow" onclick="nextSlide(this)">&#10095;</button>
    </div>

    <div class="image-caption" data-i18n="caption4a"></div>
  </section>


  <section class="content-section image-below" data-aos="fade-up">
    <div class="text-content">
      <div class="text-box">
        <h2 data-i18n="title5"></h2>
        <p data-i18n="section5"></p>
      </div>
    </div>

    <div
      class="image-content carousel"
      data-i18n-captions='["caption5_1", "caption5_2", "caption5_3", "caption5_4"]'
    >
      <button class="arrow left-arrow" onclick="prevSlide(this)">&#10094;</button>

      <div class="carousel-images" data-index="0">
        <div class="slide"><img src="images/TUP_FITU1.jpg" /></div>
        <div class="slide">
          <video controls preload="metadata">
            <source src="videos/Tuna Universitária do Porto (XVI FITU).mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="slide"><img src="images/TUP_FITU26.jpg" /></div>
        <div class="slide"><img src="images/TUP_FITU29.jpg" /></div>
      </div>


      <button class="arrow right-arrow" onclick="nextSlide(this)">&#10095;</button>
    </div>

    <!-- This will get updated dynamically via JS based on data-i18n-captions -->
    <div class="image-caption" data-i18n="caption5_1"></div>
  </section>

  <section class="content-section image-below" data-aos="fade-up">
    <div class="text-content">
      <div class="text-box">
        <h2 data-i18n="title6"></h2>
        <p data-i18n="section6"></p>
      </div>
    </div>

    <div class="image-content carousel" data-i18n-captions='["caption6_1", "caption6_2", "caption6_3"]'>
      <button class="arrow left-arrow" onclick="prevSlide(this)">&#10094;</button>
      
      <div class="carousel-images" data-index="0">
        <div class="slide"><img src="images/TUP_FITU37.png" /></div>
        <div class="slide"><img src="images/TUP_Tagides30.png" /></div>
        <div class="slide"><img src="images/OUP_Queima_2025.png" /></div>
      </div>
      
      <button class="arrow right-arrow" onclick="nextSlide(this)">&#10095;</button>
    </div>

    <div class="image-caption" data-i18n="caption6a"></div>
  </section>

  <!-- Contact -->
  <div class="contact-section">
    <p>
      <strong data-i18n="email"></strong> <a class="contact-link" href="mailto:orfeao@orfeao.up.pt">orfeao@orfeao.up.pt</a><br>
      <strong data-i18n="address"></strong> Rua dos Bragas, 289, 4050-123 Porto<br>
      <strong data-i18n="phone"></strong> (+351) 915 260 290/1<br>
      <strong data-i18n="bookings"></strong> <a class="contact-link" href="https://orfeao.up.pt/marcacoes" target="_blank" data-i18n="clickHere"></a>
    </p>
    <div>
      <a href="https://www.facebook.com/tunauniversitariaporto" target="_blank"><i class="fa-brands fa-facebook-square"></i></a>
      <a href="https://www.instagram.com/tunauniversitariaporto" target="_blank"><i class="fa-brands fa-instagram"></i></a>
      <a href="https://www.youtube.com/@tunauniversitariaporto" target="_blank"><i class="fa-brands fa-youtube"></i></a>
      <a href="https://www.tiktok.com/@orfeaoup?is_from_webapp=1&sender_device=pc" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="translations/languages_aboutus.js"></script>

  <script>
    AOS.init();

    function toggleLanguageDropdown(el) {
      el.classList.toggle('active');
    }

    function resolveNestedKey(obj, path) {
      return path.split('.').reduce((o, k) => (o && o[k] !== undefined ? o[k] : null), obj);
    }

    function updateImageCaptions(lang) {
      document.querySelectorAll('.image-caption[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (imageCaptions[lang] && imageCaptions[lang][key]) {
          el.textContent = imageCaptions[lang][key];
        }
      });
    }

    function applyTranslations(lang) {
      const dict = translations[lang];
      if (!dict) return;

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const value = resolveNestedKey(dict, key);

        if (value) {
          if (el.classList.contains('typewriter')) {
            el.setAttribute('data-text', value);
            el.textContent = '';
            observer.observe(el);
          } else {
            el.textContent = value;
          }
        }
      });
    }

    function updateCarousel(carousel, direction) {
      const images = carousel.querySelector('.carousel-images');
      const totalSlides = images.children.length;
      let current = parseInt(images.dataset.index) || 0;

      if (direction === 'next') {
        current = (current + 1) % totalSlides;
      } else if (direction === 'prev') {
        current = (current - 1 + totalSlides) % totalSlides;
      }
      // If direction is 'init' or unknown, keep current as is

      images.dataset.index = current;
      images.style.transform = `translateX(-${current * 100}%)`;

      const captionKeys = JSON.parse(carousel.getAttribute('data-i18n-captions') || '[]');
      const captionEl = carousel.nextElementSibling;
      if (!captionEl || !captionEl.classList.contains('image-caption')) return;

      const lang = localStorage.getItem('lang') || 'pt';

      if (captionKeys[current] && imageCaptions[lang] && imageCaptions[lang][captionKeys[current]]) {
        captionEl.textContent = imageCaptions[lang][captionKeys[current]];
      } else {
        captionEl.textContent = '';
      }
    }

    function nextSlide(button) {
      const carousel = button.closest('.carousel');
      const images = carousel.querySelector('.carousel-images');
      const slides = images.children;
      const captionContainer = carousel.querySelector('.image-caption') || carousel.nextElementSibling;
      const captions = JSON.parse(carousel.getAttribute('data-i18n-captions'));

      let index = parseInt(images.getAttribute('data-index'), 10) || 0;
      index = (index + 1) % slides.length;
      images.style.transform = `translateX(-${index * 100}%)`;
      images.setAttribute('data-index', index);

      updateCaption(captionContainer, captions, index);
    }

    function prevSlide(button) {
      const carousel = button.closest('.carousel');
      const images = carousel.querySelector('.carousel-images');
      const slides = images.children;
      const captionContainer = carousel.querySelector('.image-caption') || carousel.nextElementSibling;
      const captions = JSON.parse(carousel.getAttribute('data-i18n-captions'));

      let index = parseInt(images.getAttribute('data-index'), 10) || 0;
      index = (index - 1 + slides.length) % slides.length;
      images.style.transform = `translateX(-${index * 100}%)`;
      images.setAttribute('data-index', index);

      updateCaption(captionContainer, captions, index);
    }

    function setLanguage(lang) {
      localStorage.setItem('lang', lang);
      applyTranslations(lang);
      updateImageCaptions(lang);  
    }

    function updateCaption(captionContainer, captions, index) {
      if (captionContainer && captions && captions[index]) {
        const lang = localStorage.getItem('lang') || 'pt';
        const key = captions[index];
        captionContainer.setAttribute('data-i18n', key);

        // Use imageCaptions instead of translations
        const captionText = imageCaptions[lang]?.[key] || key;
        captionContainer.textContent = captionText;
      }
    }

    document.querySelectorAll('.language-option').forEach((btn, index) => {
      const langs = ['pt', 'en', 'es', 'fr', 'de', 'it'];
      btn.addEventListener('click', () => {
        setLanguage(langs[index]);
      });
    });

    const savedLang = localStorage.getItem('lang') || 'pt';
    applyTranslations(savedLang);
    updateImageCaptions(savedLang); 

    // Initialize carousel caption for all carousels on page load
    document.querySelectorAll('.carousel').forEach(carousel => {
      updateCarousel(carousel, 'init');  // 'init' or any string that does not increment/decrement
    });


  </script>
</body>
</html>